{"ast":null,"code":"var _jsxFileName = \"D:\\\\Quiz\\\\user\\\\src\\\\redux\\\\actions\\\\loginAction.js\";\nimport apis from \"../../helper/Apis\";\nimport { ActionTypes } from \"../action-types\";\nimport Auth from \"../../helper/Auth\";\nimport axios from \"axios\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const loginRequestAction = details => {\n  return async dispatch => {\n    const response = await axios.post(apis.BASE + apis.LOGIN, details);\n\n    if (response.data.success) {\n      Auth.storeToken(response.data.token);\n      dispatch({\n        type: ActionTypes.LOGIN,\n        payload: {\n          isLoggedIn: true,\n          userDetails: response.data.user\n        }\n      });\n    } else {\n      Auth.deleteToken();\n      dispatch({\n        type: ActionTypes.SET_ALERT,\n        payload: {\n          isAlert: true,\n          title: \"Login Failed\",\n          type: \"error\",\n          message: response.data.message\n        }\n      });\n    }\n  };\n};\nexport const logoutUser = () => dispatch => {\n  Auth.deleteToken();\n  dispatch({\n    type: ActionTypes.LOGOUT,\n    payload: 'Manual Logout'\n  });\n  return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 11\n  }, this);\n};\nexport const getUserDetails = () => {\n  return async dispatch => {\n    axios.get(apis.BASE + apis.GET_USER_DETAILS, {\n      headers: {\n        'Authorization': `Bearer ${Auth.retriveToken()}`\n      }\n    }).then(response => {\n      if (response.data.success) {\n        dispatch({\n          type: ActionTypes.LOGIN,\n          payload: {\n            isLoggedIn: true,\n            userDetails: response.data.user\n          }\n        });\n      } else {\n        Auth.deleteToken();\n        return /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 19\n        }, this);\n      }\n    }).catch(err => {\n      Auth.deleteToken();\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }, this);\n    });\n  };\n};","map":{"version":3,"names":["apis","ActionTypes","Auth","axios","Navigate","loginRequestAction","details","dispatch","response","post","BASE","LOGIN","data","success","storeToken","token","type","payload","isLoggedIn","userDetails","user","deleteToken","SET_ALERT","isAlert","title","message","logoutUser","LOGOUT","getUserDetails","get","GET_USER_DETAILS","headers","retriveToken","then","catch","err"],"sources":["D:/Quiz/user/src/redux/actions/loginAction.js"],"sourcesContent":["import apis from \"../../helper/Apis\";\nimport { ActionTypes } from \"../action-types\";\nimport Auth from \"../../helper/Auth\";\nimport axios from \"axios\";\nimport { Navigate } from \"react-router-dom\";\n\nexport const loginRequestAction = (details) => {\n  return async(dispatch) => {\n    const response = await axios.post(apis.BASE+ apis.LOGIN,details);\n    if(response.data.success) {\n      Auth.storeToken(response.data.token);\n      dispatch( {\n        type: ActionTypes.LOGIN,\n        payload : {\n          isLoggedIn : true,\n          userDetails : response.data.user\n        }\n      })\n    } else {\n      Auth.deleteToken();\n      dispatch({\n        type:ActionTypes.SET_ALERT,\n        payload : {\n          isAlert : true,\n          title : \"Login Failed\",\n          type : \"error\",\n          message : response.data.message\n        }\n      })\n    }\n  }\n}\n\n\nexport const logoutUser = ()=> dispatch =>{\n  Auth.deleteToken();\n  dispatch({\n     type : ActionTypes.LOGOUT,\n     payload : 'Manual Logout'\n  })\n  return (<Navigate to='/'/>)\n}\n\nexport const getUserDetails = () => {\n  return async(dispatch) => {\n    axios.get(apis.BASE+apis.GET_USER_DETAILS, {\n      headers:{\n        'Authorization':`Bearer ${Auth.retriveToken()}`\n      }\n    }).then(response => {\n      \n        if(response.data.success) {\n          dispatch({\n            type:ActionTypes.LOGIN,\n            payload: {\n              isLoggedIn : true,\n              userDetails : response.data.user\n            }\n          })\n        } else {\n          Auth.deleteToken();\n          return (<Navigate to=\"/\"/>);\n        }\n      \n    }).catch(err=> {\n      Auth.deleteToken();\n      return (<Navigate to=\"/\"/>);\n    }) \n    \n  }\n}"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,mBAAjB;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AAEA,OAAO,MAAMC,kBAAkB,GAAIC,OAAD,IAAa;EAC7C,OAAO,MAAMC,QAAN,IAAmB;IACxB,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAN,CAAWT,IAAI,CAACU,IAAL,GAAWV,IAAI,CAACW,KAA3B,EAAiCL,OAAjC,CAAvB;;IACA,IAAGE,QAAQ,CAACI,IAAT,CAAcC,OAAjB,EAA0B;MACxBX,IAAI,CAACY,UAAL,CAAgBN,QAAQ,CAACI,IAAT,CAAcG,KAA9B;MACAR,QAAQ,CAAE;QACRS,IAAI,EAAEf,WAAW,CAACU,KADV;QAERM,OAAO,EAAG;UACRC,UAAU,EAAG,IADL;UAERC,WAAW,EAAGX,QAAQ,CAACI,IAAT,CAAcQ;QAFpB;MAFF,CAAF,CAAR;IAOD,CATD,MASO;MACLlB,IAAI,CAACmB,WAAL;MACAd,QAAQ,CAAC;QACPS,IAAI,EAACf,WAAW,CAACqB,SADV;QAEPL,OAAO,EAAG;UACRM,OAAO,EAAG,IADF;UAERC,KAAK,EAAG,cAFA;UAGRR,IAAI,EAAG,OAHC;UAIRS,OAAO,EAAGjB,QAAQ,CAACI,IAAT,CAAca;QAJhB;MAFH,CAAD,CAAR;IASD;EACF,CAvBD;AAwBD,CAzBM;AA4BP,OAAO,MAAMC,UAAU,GAAG,MAAKnB,QAAQ,IAAG;EACxCL,IAAI,CAACmB,WAAL;EACAd,QAAQ,CAAC;IACNS,IAAI,EAAGf,WAAW,CAAC0B,MADb;IAENV,OAAO,EAAG;EAFJ,CAAD,CAAR;EAIA,oBAAQ,QAAC,QAAD;IAAU,EAAE,EAAC;EAAb;IAAA;IAAA;IAAA;EAAA,QAAR;AACD,CAPM;AASP,OAAO,MAAMW,cAAc,GAAG,MAAM;EAClC,OAAO,MAAMrB,QAAN,IAAmB;IACxBJ,KAAK,CAAC0B,GAAN,CAAU7B,IAAI,CAACU,IAAL,GAAUV,IAAI,CAAC8B,gBAAzB,EAA2C;MACzCC,OAAO,EAAC;QACN,iBAAiB,UAAS7B,IAAI,CAAC8B,YAAL,EAAoB;MADxC;IADiC,CAA3C,EAIGC,IAJH,CAIQzB,QAAQ,IAAI;MAEhB,IAAGA,QAAQ,CAACI,IAAT,CAAcC,OAAjB,EAA0B;QACxBN,QAAQ,CAAC;UACPS,IAAI,EAACf,WAAW,CAACU,KADV;UAEPM,OAAO,EAAE;YACPC,UAAU,EAAG,IADN;YAEPC,WAAW,EAAGX,QAAQ,CAACI,IAAT,CAAcQ;UAFrB;QAFF,CAAD,CAAR;MAOD,CARD,MAQO;QACLlB,IAAI,CAACmB,WAAL;QACA,oBAAQ,QAAC,QAAD;UAAU,EAAE,EAAC;QAAb;UAAA;UAAA;UAAA;QAAA,QAAR;MACD;IAEJ,CAnBD,EAmBGa,KAnBH,CAmBSC,GAAG,IAAG;MACbjC,IAAI,CAACmB,WAAL;MACA,oBAAQ,QAAC,QAAD;QAAU,EAAE,EAAC;MAAb;QAAA;QAAA;QAAA;MAAA,QAAR;IACD,CAtBD;EAwBD,CAzBD;AA0BD,CA3BM"},"metadata":{},"sourceType":"module"}